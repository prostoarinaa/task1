**HTTP протокол**

**ЧТО ТАКОЕ HTTP?**

HyperText Transfer Protocol — «протокол передачи гипертекста» — протокол прикладного уровня передачи данных (изначально — в виде гипертекстовых документов в формате HTML, в настоящий момент используется для передачи произвольных данных). 

Основой HTTP является технология «клиент-сервер», 
то есть предполагается существование потребителей (клиентов), которые инициируют соединение и посылают запрос, и поставщиков (серверов), которые ожидают соединения для получения запроса, производят необходимые действия и возвращают обратно сообщение с результатом

![](Aspose.Words.1c950ea2-e354-4fc1-a799-835324b21700.001.png)

**ВСПОМНИМ, ЧТО ТАКОЕ URI**

URI - отвечает на вопрос: “Где и как найти что - то?”


Пример:
http://example.com/just/some/long/path/path

![The Real Difference Between a URL and a URI - Daniel Miessler](Aspose.Words.1c950ea2-e354-4fc1-a799-835324b21700.002.png)

**ИСТОРИЯ HTTP**

HTTP/0.9
HTTP был предложен в марте 1991 года Тимом 
Бернерсом-Ли, работавшим тогда в CERN, как 
механизм для доступа к документам в Интернете
` `и облегчения навигации посредством использования
` `гипертекста. Самая ранняя версия протокола HTTP/0.9 
была впервые опубликована в январе 1992 г. (хотя 
реализация датируется 1990 годом). Спецификация 
протокола привела купорядочению правил 
взаимодействия между клиентами и серверами HTTP,
` `а также четкому разделению функций между этими 
двумя компонентами. Были задокументированы основные синтаксические и семантические положения.

HTTP/1.0
В мае 1996 года для практической реализации HTTP был выпущен информационный документ RFC 1945, что послужило основой для реализации большинства компонентов 

HTTP/1.1
Текущая версия протокола, принята в июне 1999 года. Новым в этой версии 
был режим «постоянного соединения»: TCP-соединение может оставаться 
открытым после отправки ответа на запрос, что позволяет посылать несколько запросов за одно соединение. Клиент теперь обязан посылать информацию об имени хоста, к которому он обращается, что сделало возможной более простую организацию виртуального хостинга.

HTTP/2
11 февраля 2015 года опубликованы финальные версии черновика следующей версии протокола. В отличие от предыдущих версий, протокол HTTP/2 является бинарным. Среди ключевых особенностей мультиплексирование запросов, расстановка приоритетов для запросов, сжатия заголовков, загрузка нескольких элементов параллельно, посредством одного TCP соединения, поддержка

![](Aspose.Words.1c950ea2-e354-4fc1-a799-835324b21700.003.png)

**ПОГОВОРИМ О СТАНДАРТАХ RFC**

RFC - Документы, содержащие технические спецификации и стандарты,
широко применяемые во всемирной сети интернет.
Существует более 5000 документов.

**HTTP. Структура**

Каждое HTTP-сообщение состоит из трёх частей, которые передаются в указанном порядке:

Стартовая строка (англ. Starting line) — определяет тип сообщения;
Заголовки (англ. Headers) — характеризуют тело сообщения, параметры передачи и прочие сведения;
Тело сообщения (англ. Message Body) — непосредственно данные сообщения. Обязательно должно отделяться от заголовков пустой строкой.
Заголовки и тело сообщения могут отсутствовать, но стартовая строка является обязательным элементом, так как указывает на тип запроса/ответа. Исключением является версия 0.9 протокола, у которой сообщение запроса содержит только стартовую строку, а сообщения ответа только тело сообщения.


Для версии протокола 1.1 сообщение запроса обязательно должно содержать заголовок Host.

![](Aspose.Words.1c950ea2-e354-4fc1-a799-835324b21700.004.png)

**HTTP. Структура. Стартовая строка запроса**

Метод (англ. Method) — название запроса, одно слово заглавными буквами
URI определяет путь к запрашиваемому документу
Версия (англ. Version) — пара разделенных точкой
цифр. Например: 1.0

![](Aspose.Words.1c950ea2-e354-4fc1-a799-835324b21700.005.png)

**HTTP. Структура. Стартовая строка ответы**

HTTP/Версия Код-Состояния Пояснение
Версия — пара разделенных точкой цифр как в запросе.
Код состояния (англ. Status Code) — три цифры. По коду состояния определяется
дальнейшее содержимое сообщения и поведение клиента.
Пояснение (англ. Reason Phrase) — текстовое короткое пояснение к коду ответа для
пользователя. Никак не влияет на сообщение и является необязательным.

![](Aspose.Words.1c950ea2-e354-4fc1-a799-835324b21700.006.png)

**HTTP. Методы**

Последовательность из любых символов, кроме управляющих и разделителей, указывающая на основную операцию над ресурсом. Метод представляет собой короткое английское слово, записаное заглавными буквами. 

Каждый сервер обязан поддерживать как минимум методы GET и HEAD. Если сервер не распознал указанный клиентом метод, то он должен вернуть статус 501 (Not Implemented). Если серверу метод известен, но он неприменим к конкретному ресурсу, то возвращается сообщение с кодом 405 (Method Not Allowed). В обоих случаях серверу следует включить в
сообщение ответа заголовок Allow со списком поддерживаемых методов.
Кроме методов GET и HEAD, часто применяется метод POST.

![](Aspose.Words.1c950ea2-e354-4fc1-a799-835324b21700.007.png)

**OPTIONS**
Используется для определения возможностей веб-сервера или параметров 
соединения для конкретного ресурса. В ответ серверу следует включить 
заголовок Allow со списком поддерживаемых методов. Также в заголовке 
ответа может включаться информация о поддерживаемых расширениях.


**GET**
Используется для запроса содержимого указанного ресурса. С помощью метода GET можно
также начать какой-либо процесс. В этом случае в тело ответного сообщения следует включить информацию о ходе выполнения процесса. Клиент может передавать параметры выполнения запроса в URI целевого ресурса после
символа «?»:
GET /path/resource?param1=value1&param2=value2 HTTP/1.1
Согласно стандарту HTTP, запросы типа GET считаются идемпотентными

**HEAD**
Аналогичен методу GET, за исключением того, что в ответе сервера отсутствует тело. Запрос HEAD обычно применяется для извлечения метаданных, проверки наличия ресурса (валидация URL) и чтобы узнать, не изменился ли он с момента последнего обращения.
Заголовки ответа могут кэшироваться. При несовпадении метаданных ресурса с соответствующей информацией в кэше копия ресурса


**POST**
Применяется для передачи пользовательских данных заданному ресурсу. 
Например, в блогах посетители обычно могут вводить свои комментарии 
к записям в HTML-форму, после чего они передаются серверу методом POST 
и он помещает их на страницу. При этом передаваемые данные (в примере с блогами — текст комментария) включаются в тело запроса. Аналогично с помощью метода POST обычно загружаются файлы на сервер.
В отличие от метода GET, метод POST не считается идемпотентным, то есть многократное повторение одних и тех же запросов POST может возвращать разные результаты (например, после каждой отправки комментария будет появляться очередная копия этого комментария).
При результате выполнения 200 (Ok) в тело ответа следует включить сообщение об итоге выполнения запроса. 

**PUT**
Применяется для загрузки содержимого запроса на указанный в запросе URI. Если по заданному URI не существует ресурс, то сервер создаёт его и возвращает статус 201 (Created). Если же был изменён ресурс, то сервер возвращает 200 (Ok) или 204 (No Content). Сервер не должен игнорировать некорректные заголовки Content-\*, передаваемые клиентом вместе с сообщением. Если какой-то из этих заголовков не может быть распознан или не допустим при текущих условиях, то необходимо вернуть код ошибки 501 (Not Implemented). Фундаментальное различие методов POST и PUT заключается в понимании предназначений URI ресурсов. 


**PATCH**
Аналогично PUT, но применяется только к фрагменту ресурса

**DELETE**
Удаляет указанный ресурс

**TRACE**
Возвращает полученный запрос так, что клиент может увидеть, какую информацию промежуточные серверы добавляют или изменяют в запросе

**CONNECT**
Преобразует соединение запроса в прозрачный TCP/IP-туннель, обычно чтобы содействовать
установлению защищённого SSL-соединения через нешифрованный прокси

**HTTP. Коды состояния**

**1xx Informational («Информационный»)**
В этот класс выделены коды, информирующие о процессе передачи. В HTTP/1.0 сообщения с такими кодами должны игнорироваться. В HTTP/1.1 клиент должен быть готов принять этот класс сообщений как обычный ответ, но ничего отправлять серверу не нужно. Сами сообщения от сервера содержат только стартовую строку ответа и, если требуется, несколько специфичных для ответа полей заголовка. 
**2xx Success («Успех»)**
Сообщения данного класса информируют о случаях успешного принятия и обработки запроса клиента. В зависимости от статуса сервер может ещё передать заголовки и тело сообщения.
**3xx Redirection («Перенаправление»)**
Коды класса 3xx сообщают клиенту что для успешного выполнения операции необходимо сделать другой запрос (как правило по другому URI). Из данного класса пять кодов 301, 302, 303, 305 и 307 относятся непосредственно к перенаправлениям (редирект). Адрес, по которому клиенту следует произвести запрос, сервер указывает в заголовке Location. При этом допускается использование фрагментов в целевом URI.

**4xx Client Error («Ошибка клиента»)**
Класс кодов 4xx предназначен для указания ошибок со стороны клиента. При использовании всех методов, кроме HEAD, сервер должен вернуть в
теле сообщения гипертекстовое пояснение для пользователя.


**5xx Server Error («Ошибка сервера»)**
Коды 5xx выделены под случаи неудачного выполнения операции по вине сервера. Для всех ситуаций, кроме использования метода HEAD, сервер
должен включать в тело сообщения объяснение, которое клиент отобразит пользователю.

**HTTP. Заголовки**


Все заголовки разделяются на четыре основных группы:
General Headers («Основные заголовки») — могут включаться в любое сообщение клиента и сервера.
Request Headers («Заголовки запроса») — используются только в запросах клиента.
Response Headers («Заголовки ответа») — только для ответов от сервера.
Entity Headers («Заголовки сущности») — сопровождают каждую сущность сообщения

**Пример
Accept - Список допустимых форматов ресурса
Accept: text/plain
Accept-Charset
Перечень поддерживаемых кодировок для
предоставления пользователю
Accept-Charset: utf-8
Allow
Список поддерживаемых методов
Allow: OPTIONS, GET, HEAD** 

![](Aspose.Words.1c950ea2-e354-4fc1-a799-835324b21700.008.png)

**HTTP vs HTTPs**

HyperText Transfer Protocol Secure — расширение
протокола HTTP, поддерживающее шифрование.
Данные, передаваемые по протоколу HTTPS,
«упаковываются» в криптографический протокол SSL
или TLS.
В отличие от HTTP, для HTTPS по умолчанию
используется TCP-порт 443

HTTPS не является отдельным протоколом. Это
обычный HTTP, работающий через шифрованные
транспортные механизмы SSL и TLS. Он обеспечивает
защиту от атак, основанных на прослушивании
сетевого соединения — от снифферских атак и атак
типа man-in-the-middle, при условии, что будут
использоваться шифрующие средства и сертификат
сервера проверен и ему доверяют

![Secure Socket Layer (SSL) - CyberHoot](Aspose.Words.1c950ea2-e354-4fc1-a799-835324b21700.009.png)

